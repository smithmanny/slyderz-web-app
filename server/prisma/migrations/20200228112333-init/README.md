# Migration `20200228112333-init`

This migration has been generated by Shakhor at 2/28/2020, 11:23:33 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."User" DROP COLUMN "roles",
ADD COLUMN "avatarUrl" text   ,
ADD COLUMN "role" text  NOT NULL DEFAULT 'USER',
ADD COLUMN "tokenCount" integer  NOT NULL DEFAULT 0;

DROP TYPE "Roles"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200105125139-update-user-model..20200228112333-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,39 +1,37 @@
-generator photon {
-  provider = "photonjs"
+generator client {
+  provider = "prisma-client-js"
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("POSTGRESQL_URL")
 }
 model Post {
-  id        String   @default(cuid()) @id
-  createdAt DateTime @default(now())
-  updatedAt DateTime @updatedAt
+  content   String?
+  createdAt DateTime
+  id        String   @id
   published Boolean  @default(false)
-  title     String
-  content   String?
+  title     String   @default("")
+  updatedAt DateTime
   author    User?
 }
 model User {
-  id       String  @default(cuid()) @id
-  email    String  @unique
-  password String
-  firstName     String
-  lastName     String
-  roles    Roles @default(USER)
-  address1 String?
-  address2 String?
-  city  String?
-  state String?
-  postalCode Int?
-  resetToken String?
-  resetTokenExpiry  Float?
-}
-
-enum Roles {
-  USER
-  ADMIN
+  address1         String?
+  address2         String?
+  avatarUrl        String?
+  city             String?
+  email            String  @default("") @unique
+  firstName        String  @default("")
+  id               String  @id
+  lastName         String  @default("")
+  password         String  @default("")
+  postalCode       Int?
+  resetToken       String?
+  resetTokenExpiry Float?
+  role             String  @default("USER")
+  state            String?
+  tokenCount       Int     @default(0)
+  post             Post[]
 }
```


